@model Stores.Models.Store

@await Html.PartialAsync("_MessagePartial")

<div class="store-section mb-4">
    <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between mb-3">
        <h3 class="store-name mb-0">@Model.Name</h3>
        <div class="d-flex gap-2">
            <a class="manage-orders-btn btn btn-success"
               asp-controller="Order"
               asp-action="ManageOrders"
               asp-route-storeId="@Model.Id">
                Manage Orders
            </a>
            <a class="add-product-btn btn btn-success" 
               asp-controller="Product" 
               asp-action="Create">
                + Add Product
            </a>
        </div>
    </div>
    <div class="container">
        <div class="row">
            @foreach (var product in Model.Products)
            {
                <div class="col-6 col-md-4 col-lg-3 mb-4">
                    <div class="card text-center h-100">
                        <div class="card-body card-text-bg">
                            <p class="card-title">@product.Name</p>
                        </div>
                        <img src="@product.PhotoLink" alt="@product.Description" class="card-img-bottom img-fluid product-img"/>
                        <div class="card-footer d-flex flex-column align-items-center">
                            <p>Available: @product.Quantity</p>
                            <strong>@product.Price.ToString("C")</strong>
                            <div class="d-flex gap-2 mt-2">
                                <a class="edit-product-btn btn btn-primary btn-sm" 
                                   asp-controller="Product" 
                                   asp-action="Edit" 
                                   asp-route-id="@product.Id">
                                    Edit
                                </a>
                                <a class="btn btn-danger btn-sm" 
                                   asp-controller="Product" 
                                   asp-action="Delete" 
                                   asp-route-id="@product.Id"
                                   onclick="return confirm('Are you sure about deleting this product?')">
                                    <i class="bi bi-trash"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>